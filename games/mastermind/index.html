<!doctype html>
<html lang="hi">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Mastermind â€” Ravindra Games Hub</title>
    <link rel="stylesheet" href="../../style.css">
</head>

<body>
    <div class="container">
        <h2>Mastermind (4 slots, 6 colors)</h2>
        <div id="gameArea"></div>
        <div style="margin-top:12px"><button id="restart" class="chip">Restart</button></div>
    </div>
    <script>
        // Simple Mastermind: randomly generate code of 4 colors (0..5). Player guesses via prompts.
        let secret = Array.from({ length: 4 }, () => Math.floor(Math.random() * 6));
        let attempts = 0;
        async function makeGuess() {
            const guessStr = prompt('Enter 4 digits (0-5) e.g. 0123'); if (!guessStr) return;
            const guess = guessStr.split('').map(Number);
            attempts++;
            let exact = 0, colorOnly = 0;
            const sCopy = [...secret];
            for (let i = 0; i < 4; i++) if (guess[i] === sCopy[i]) { exact++; sCopy[i] = null; }
            for (let i = 0; i < 4; i++) {
                if (guess[i] !== secret[i]) {
                    const idx = sCopy.indexOf(guess[i]); if (idx !== -1) { colorOnly++; sCopy[idx] = null; }
                }
            }
            const msg = `Attempt ${attempts}: exact=${exact}, color=${colorOnly}`;
            alert(msg);
            if (exact === 4) { const score = Math.max(0, 100 - attempts * 10); window.submitScore && window.submitScore('mastermind', score, 'player'); alert('You cracked it! Score: ' + score); }
        }
        document.getElementById('gameArea').innerHTML = '<button id="guessBtn" class="btn">Make Guess</button>';
        document.getElementById('guessBtn').addEventListener('click', makeGuess);
        document.getElementById('restart').addEventListener('click', () => { secret = Array.from({ length: 4 }, () => Math.floor(Math.random() * 6)); attempts = 0; alert('New code generated'); });
    </script>
</body>

</html>