<!doctype html>
<html lang="hi">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Ravindra Games Hub</title>
    <meta name="description"
        content="Ravindra Games Hub — collection of lightweight web games (TicTacToe, Mastermind, Memory...)">
    <!-- <meta name="theme-color" content="#1a1a1a"> -->
    <!-- <meta name="theme-color" content="#0f172a" id="meta-theme-color"> -->
    <link rel="manifest" href="manifest.json">
    <link rel="stylesheet" href="style.css">
</head>

<body>
    <div class="container">
        <header>
            <div class="brand">
                <div class="logo">RG</div>
                <div>
                    <h1>Ravindra Games Hub</h1>
                    <p class="lead">Quick browser games — PWA-ready</p>
                </div>
            </div>
            <div class="hdrbtns">
                <div class="hdr-child-div">
                    <!-- <a class="chip" id="toggle-leaderboard" href="leaderboard/index.html">Global Leaderboard</a> -->
                    <a class="chip" id="toggle-leaderboard">Global Leaderboard</a>
                    <a class="chip" href="auth/login.html">Sign in</a>
                </div>
                <div class="hdr-child-div">
                    <button class="chip" id="local-toggle-leaderboard">Local Leaderboard</button>
                    <button class="chip" id="themeToggle">Light</button>
                </div>
                <p id="welcom" class="lead">Welcome</p>
            </div>
        </header>


        <main>
            <section class="grid" id="gamesGrid">
                <!-- <article class="game-card"><img class="thumb" src="/assets/icons/icon-512.png">
                    <div class="content">
                        <h3>Tic Tac Toe</h3>
                        <p>Classic X vs O</p><a class="play-btn" href="games/tictactoe/index.html">Play ▶</a>
                    </div>
                </article>
                <article class="game-card"><img class="thumb" src="/assets/icons/icon-512.png">
                    <div class="content">
                        <h3>Mastermind</h3>
                        <p>Guess the color code</p><a class="play-btn" href="games/mastermind/index.html">Play ▶</a>
                    </div>
                </article> -->
            </section>
        </main>


        <footer style="margin-top:20px;color:var(--muted)">© 2025 Ravindra</footer>
    </div>
    <!-- Local Leaderboard Popup -->
    <div id="localleaderboardPopup" class="popupWindow">
        <div class="popupHeadeer">
            <!-- <h3>🏆Local Leaderboard</h3>
            <button class="primary" id="local-hide-leaderboard">Hide Leaderboard</button>
            <button class="primary" id="clear-leaderboard">Clear Leaderboard</button> -->

            <div class="controls">
                <h3>🏆Local Leaderboard</h3>
                <button class="chip" id="local-hide-leaderboard">Hide Leaderboard</button>
                <button class="primary" id="clear-leaderboard">Clear Leaderboard</button>
                <a href="../auth/login.html" class="chip">Sign in</a>
            </div>
            <div class="search-container" style="margin-bottom:10px;">
                <label>Filter game: </label>
                <select id="localgameFilter">
                    <option value="all">All</option>
                    <option value="tictactoe">Tic Tac Toe</option>
                    <option value="mastermind">Mastermind</option>
                </select>
                <label>Per page:
                    <select id="localtopSelect">
                        <option value="5">5</option>
                        <option value="10" selected>10</option>
                        <option value="25">25</option>
                        <option value="50">50</option>
                    </select>
                </label>
                <input type="text" id="localsearchInput" placeholder="🔍 Search player..." />
            </div>
        </div>
        <div class="popupContent">
            <!-- <ul id="local-leaderboardList"></ul> -->

            <section style="margin-top:12px">
                <div>
                    <table id="localleaderboardTable" border="1" cellspacing="0" cellpadding="6"
                        style="width:100%;border-collapse:collapse;text-align:left;">
                        <thead style="background:#222;color:#fff;">
                            <tr>
                                <th>#</th>
                                <th class="sortable">Game
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Winner
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Looser
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Size
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Difficulty
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Moves
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Score
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Elapsed time
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Date
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="localleaderboardTableBody">
                            <tr>
                                <td colspan="4" style="text-align:center;">Loading...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="pagination">
                    <button id="localprevPage">⬅ Prev</button>
                    <span id="localpageInfo"></span>
                    <button id="localnextPage">Next ➡</button>
                </div>
            </section>
        </div>
    </div>

    <!-- Global Leaderboard Popup -->
    <div id="leaderboardPopup" class="popupWindow">
        <div class="popupHeadeer">
            <div class="controls">
                <h3>🏆Global Leaderboard</h3>
                <button class="chip" id="hide-leaderboard">Hide Leaderboard</button>
                <!-- <button class="primary" id="clear-leaderboard">Clear Leaderboard</button> -->
                <a href="../auth/login.html" class="chip">Sign in</a>
            </div>
            <div class="search-container" style="margin-bottom:10px;">
                <label>Filter game: </label>
                <select id="gameFilter">
                    <option value="all">All</option>
                    <option value="tictactoe">Tic Tac Toe</option>
                    <option value="mastermind">Mastermind</option>
                </select>
                <label>Show Top:
                    <select id="topSelect">
                        <option value="5">5</option>
                        <option value="10" selected>10</option>
                        <option value="25">25</option>
                        <option value="50">50</option>
                    </select>
                </label>
                <input type="text" id="searchInput" placeholder="🔍 Search player..." />
            </div>
            <div id="err-text">Error text</div>
        </div>
        <div class="popupContent">
            <!-- <ul id="leaderboardList"></ul> -->
            <section style="margin-top:12px">
                <div>
                    <table id="leaderboardTable" border="1" cellspacing="0" cellpadding="6"
                        style="width:100%;border-collapse:collapse;text-align:left;">
                        <thead style="background:#222;color:#fff;">
                            <tr>
                                <th>#</th>
                                <th class="sortable">Game
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Winner
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Looser
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Size
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Difficulty
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Moves
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Score
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Elapsed time
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                                <th class="sortable">Date
                                    <span class="arrow asc">🔼</span>
                                    <span class="arrow desc">🔽</span>
                                </th>
                            </tr>
                        </thead>
                        <tbody id="leaderboardTableBody">
                            <tr>
                                <td colspan="4" style="text-align:center;">Loading...</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="pagination">
                    <button id="prevPage">⬅ Prev</button>
                    <span id="pageInfo"></span>
                    <button id="nextPage">Next ➡</button>
                </div>
            </section>
        </div>
    </div>

    <script src="leaderboard/submit-helper.js"></script>
    <script type="module" src="leaderboard/localleaderboard.js"></script>
    <script type="module" src="leaderboard/leaderboard.js"></script>
    <script>
        const games = [
            { id: 'tictactoe', name: 'tictactoe', title: 'Tic Tac Toe', desc: 'Classic X vs O — human or AI', href: 'games/tictactoe/index.html' },
            { id: 'tictactoe1', name: 'tictactoe', title: 'Tic Tac Toe New', desc: 'Classic X vs O — human or AI', href: 'games/tictactoe1/index.html' },
            { id: 'tictactoe2', name: 'tictactoe', title: 'Tic Tac Toe simple', desc: 'Classic X vs O — human or AI', href: 'games/tictactoe2/index.html' },
            { id: 'tictactoe3', name: 'tictactoe', title: 'Tic Tac Toe', desc: 'Classic X vs O — human or AI', href: 'games/tictactoe3/index.html' },
            { id: 'threeinarow', name: 'threeinarow', title: '3 in Row (Tic Tac Toe)', desc: 'Classic X vs O — human or AI', href: 'games/threeinarow/index.html' },
            { id: 'mastermind', name: 'mastermind', title: 'Mastermind', desc: 'Guess the color code', href: 'games/mastermind/index.html' },
            { id: 'mastermind1', name: 'mastermind', title: 'Mastermind', desc: 'Guess the color code', href: 'games/mastermindtext/mastermind_text.html' }
            // { id: 'memory', title: 'Memory Game', desc: 'Find pairs before timer ends', href: '/games/memory/index.html' },
            // { id: 'gomoku', title: 'Gomoku (5 in a Row)', desc: 'Beat computer with smart AI', href: '/games/gomoku/index.html' },
            // { id: 'sudoku', title: 'Sudoku', desc: 'Solve logic puzzles of various sizes', href: '/games/sudoku/index.html' },
            // { id: 'slitherlink', title: 'Slitherlink', desc: 'Create a single loop puzzle', href: '/games/slitherlink/index.html' }
        ];

        const player_name = localStorage.getItem('player_name') || 'Guest';

        document.getElementById("welcom").textContent = `Welcome ${player_name}`;
        document.getElementById("welcom").style.alignContent = "center";
        const grid = document.getElementById('gamesGrid');
        games.forEach(g => {
            const card = document.createElement('article');
            card.className = 'game-card';
            card.dataset = g.id;
            card.innerHTML = `<h3>${g.title}</h3><p>${g.desc}</p><div class='actions'><a href='${g.href}' class='play-btn'>Play</a><button class='localLeaderboardBtn' id="local-toggle-leaderboard">Local Leaderboard</button></div>`;
            grid.appendChild(card);
        });

        //toggle theme
        document.getElementById("themeToggle").addEventListener("click", () => {
            toggleTheme();
        });

        // change theme
        function toggleTheme() {
            document.body.classList.toggle("dark");
            if (document.body.classList.contains("dark")) {
                document.documentElement.setAttribute('data-theme', 'light');
                themeToggle.innerText = "☀️ Light";
                localStorage.setItem('rg_theme', 'dark');
                // textToSpeechEng('Theme Dark');
            } else {
                document.documentElement.setAttribute('data-theme', 'dark');
                themeToggle.innerText = "🌙 Dark";
                localStorage.setItem('rg_theme', 'light');
                // textToSpeechEng('Theme Light');
            }
        }
        toggleTheme(localStorage.getItem('rg_theme') === 'dark' ? 'dark' : 'light');
    </script>
    <script>
        // Lazy register SW
        if ('serviceWorker' in navigator) { navigator.serviceWorker.register('sw.js').then(() => console.log('sw registered')); }
    </script>
</body>

</html>